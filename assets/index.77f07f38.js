import{r as E,j as F,a as N,I as D,T as v,D as A,R as L,b as j}from"./vendor.17c9a7be.js";const C=function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))s(t);new MutationObserver(t=>{for(const o of t)if(o.type==="childList")for(const r of o.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&s(r)}).observe(document,{childList:!0,subtree:!0});function u(t){const o={};return t.integrity&&(o.integrity=t.integrity),t.referrerpolicy&&(o.referrerPolicy=t.referrerpolicy),t.crossorigin==="use-credentials"?o.credentials="include":t.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function s(t){if(t.ep)return;t.ep=!0;const o=u(t);fetch(t.href,o)}};C();var b="/assets/logo.ecc203fb.svg";const R=()=>"/file/launch",X=e=>e?`/file/access?file_id=${e}`:void 0;function Z(e){let n=.52;return parseInt((e.size/1024).toFixed(2))<1024&&(n=.85),5*1024<parseInt((e.size/1024).toFixed(2))&&(n=.92),new Promise(u=>{if(Number((e.size/1024).toFixed(2))<300)u({file:e});else{const s=new FileReader;s.onload=t=>{var h;const o=(h=t.target)==null?void 0:h.result,r=new Image;r.onload=async()=>{const I=document.createElement("canvas"),f=I.getContext("2d");let c=r.width,l=r.height,i=r.width,a=r.height;if(1*1024<=parseInt((e.size/1024).toFixed(2))&&parseInt((e.size/1024).toFixed(2))<=10*1024){var d=1600,p=1600;c=i,l=a,(i>d||a>p)&&(i/a>d/p?(c=d,l=Math.round(d*(a/i))):(l=p,c=Math.round(p*(i/a))))}10*1024<=parseInt((e.size/1024).toFixed(2))&&parseInt((e.size/1024).toFixed(2))<=20*1024&&(d=1400,p=1400,c=i,l=a,(i>d||a>p)&&(i/a>d/p?(c=d,l=Math.round(d*(a/i))):(l=p,c=Math.round(p*(i/a))))),I.width=c,I.height=l,f==null||f.clearRect(0,0,c,l),f==null||f.drawImage(r,0,0,c,l);const g=I.toDataURL("image/jpeg",n),y=atob(g.split(",")[1]);let m=y.length;const M=new Uint8Array(new ArrayBuffer(m));for(;m--;)M[m]=y.charCodeAt(m);const w=new File([M],e.name,{type:"image/jpeg"});u({file:w,url:g})},o&&(r.src=o)},s.readAsDataURL(e)}})}async function z(e){const n="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6ImFjYjViMzM2LTM4MDctNDQ2ZS1hM2IwLWM5ZjFmMDMxODEzMiIsIm1vYmlsZSI6IjEzMjk5OTkxMjM2IiwibmFtZSI6bnVsbCwic3RhdHVzIjoiZW5hYmxlZCIsInR5cGUiOiJrZXlib2FyZGVyIiwidXNlckNvdXJzZXMiOlt7ImNvdXJzZV9pZCI6ImVkODRjNDI3LTI2MDYtNDMyMS05NDk4LWYxMDlkY2ZlZDNmOCJ9XSwidXNlclBhcGVyVHlwZXMiOlt7InBhcGVyX3R5cGUiOiJtYXRoX29uZSJ9XSwidXNlckV4ZXJjaXNlcyI6W10sImlhdCI6MTY0NTQxMDE3OH0.0sdjFrVzGNTXz8_faCf3XFnygpyItGxeFLyZvLvvCRU",s=await(await fetch(R(),{headers:{Authorization:`bearer ${n}`,"Content-Type":"application/json"},method:"post",body:JSON.stringify({filename:e.name})})).json(),t=await Z(e),o=new FormData;Object.keys(s.multipart).forEach(I=>{const f=s.multipart[I];o.append(I,f)}),o.append("file",t.file);const h=await(await fetch(s.host,{method:"post",body:o})).json();return{url:X(h.file_id)||""}}function O(){const[e,n]=E.exports.useState([]),u=3;return F("div",{className:"App",children:N("header",{className:"App-header",children:[F("img",{src:b,className:"App-logo",alt:"logo"}),F("p",{children:"\u6B22\u8FCE\u4F7F\u7528MathITS\u4E0A\u4F20\u89E3\u7B54\u5668"}),F(D,{value:e,onChange:n,upload:z,multiple:!0,maxCount:u,showUpload:e.length<u,onCountExceed:s=>{v.show(`\u6700\u591A\u9009\u62E9 ${u} \u5F20\u56FE\u7247\uFF0C\u4F60\u591A\u9009\u4E86 ${s} \u5F20`)},onDelete:()=>A.confirm({content:"\u662F\u5426\u786E\u8BA4\u5220\u9664\u56FE\u7247"})}),F("p",{children:"\u8BF7\u70B9\u51FB\u6309\u94AE\u4E0A\u4F20\u56FE\u7247\uFF0C\u6700\u591A\u53EF\u4E0A\u4F20\u4E09\u5F20\u56FE\u7247"})]})})}L.render(F(j.StrictMode,{children:F(O,{})}),document.getElementById("root"));
